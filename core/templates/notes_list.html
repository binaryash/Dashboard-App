{% if notes %}
<div class="space-y-4 max-h-[80vh] overflow-auto pr-2" x-data="{ editingId: null }">
  {% for note in notes %}
  <div class="rounded-md border border-zinc-200 bg-zinc-50 p-4 dark:border-zinc-800 dark:bg-zinc-950/40"
       x-data="{ expanded: false }">

    <!-- Note Content -->
    <div class="prose prose-zinc max-w-none prose-p:my-2 prose-pre:bg-zinc-100 prose-code:px-1 prose-code:py-0.5 prose-code:bg-zinc-100 prose-code:rounded prose-headings:mt-3 prose-headings:mb-2 dark:prose-invert dark:prose-pre:bg-zinc-900 dark:prose-code:bg-zinc-900"
         :class="expanded ? '' : 'line-clamp-3'"
         @click="if(!expanded) expanded = true">
      {{ note.note }}
    </div>

    <!-- Action Buttons -->
    <div class="mt-3 flex gap-2">
      <button
        @click="expanded = !expanded"
        x-show="!expanded"
        class="text-xs text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-zinc-200">
        Show more
      </button>

      <a href="{{ url_for('edit_note', note_id=note.id) }}"
         class="inline-flex items-center rounded-md border border-zinc-300 bg-white px-3 py-1.5 text-sm text-zinc-800 shadow-sm hover:bg-zinc-50 focus:outline-none focus:ring-2 focus:ring-zinc-300 dark:border-zinc-700 dark:bg-zinc-950 dark:text-zinc-200 dark:hover:bg-zinc-900">
        Edit
      </a>

      <button
        hx-delete="/delete_note/{{ note.id }}"
        hx-confirm="Are you sure you want to delete this note?"
        hx-target="#notes-container"
        hx-swap="innerHTML"
        class="inline-flex items-center rounded-md border border-red-300 bg-white px-3 py-1.5 text-sm text-red-700 shadow-sm hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-200 dark:border-red-700 dark:bg-zinc-950 dark:text-red-300 dark:hover:bg-red-900/30">
        Delete
      </button>
    </div>
  </div>
  {% endfor %}
</div>
{% else %}
<p class="text-sm text-zinc-500 dark:text-zinc-400">No notes found for this date.</p>
{% endif %}
